1
00:00:05,632 --> 00:00:09,984
版本3的形式让我们看到了一个可以偷懒的地方

2
00:00:12,288 --> 00:00:14,848
蓝波为人类

3
00:00:15,360 --> 00:00:16,896
进步的原动力

4
00:00:17,408 --> 00:00:19,712
可以开玩笑的这么讲

5
00:00:20,224 --> 00:00:21,760
我们为了让人类更

6
00:00:22,528 --> 00:00:23,552
舒服一些

7
00:00:23,808 --> 00:00:26,624
所以不断的发明更是干的东西

8
00:00:28,160 --> 00:00:29,952
在这个版本山里头

9
00:00:31,488 --> 00:00:35,328
我们对于任何一个Class abcde任何一个class

10
00:00:36,608 --> 00:00:39,424
我们想要它有良好的内存管理

11
00:00:39,680 --> 00:00:40,448
笑话

12
00:00:41,472 --> 00:00:42,496
我们就写出

13
00:00:42,752 --> 00:00:44,800
浅黄色的最快

14
00:00:45,056 --> 00:00:46,080
这三个地方

15
00:00:48,128 --> 00:00:50,688
这个写法非常的知识

16
00:00:51,456 --> 00:00:56,320
Classic也是这么写的C的都是这么写

17
00:00:58,624 --> 00:00:59,392
这其中

18
00:00:59,648 --> 00:01:03,488
Handlers ABCD的名称有关系的有吗

19
00:01:03,744 --> 00:01:05,024
仔细看

20
00:01:05,536 --> 00:01:06,048
这个

21
00:01:07,584 --> 00:01:08,608
没有任何关系

22
00:01:09,376 --> 00:01:11,168
定名救命这一个名称

23
00:01:11,424 --> 00:01:12,192
OK啊

24
00:01:12,448 --> 00:01:15,264
到了Class B也没有这个名称也OK

25
00:01:16,288 --> 00:01:17,824
下面这个四行呢

26
00:01:21,408 --> 00:01:23,968
没有任何汉服相关的

27
00:01:24,224 --> 00:01:24,736
绫子

28
00:01:27,552 --> 00:01:28,064
飞行

29
00:01:29,344 --> 00:01:30,112
这个地方

30
00:01:30,624 --> 00:01:31,648
名字相关

31
00:01:34,208 --> 00:01:37,536
所以我们有没有可能把这些东西写

32
00:01:37,792 --> 00:01:39,584
成一个macro

33
00:01:40,864 --> 00:01:45,472
这个标题叫macro for More static allocator

34
00:01:45,728 --> 00:01:48,288
Statical OK了就是刚刚的版本

35
00:01:48,800 --> 00:01:54,176
我们现在要去那个有人很不喜欢那个我还不讨厌

36
00:01:54,688 --> 00:01:55,968
我觉得挺好的

37
00:01:56,736 --> 00:02:02,880
把这个转换成这样左手边浅黄色的部分转成右边

38
00:02:03,136 --> 00:02:04,416
浅蓝色的部分

39
00:02:06,208 --> 00:02:09,792
这个是两个macro一个叫dear

40
00:02:10,560 --> 00:02:12,352
6Plus instrument

41
00:02:13,632 --> 00:02:15,168
是我国取得名字了

42
00:02:17,472 --> 00:02:21,056
右边这个由于这一块是在Class的外头

43
00:02:21,312 --> 00:02:22,848
克拉斯的外头

44
00:02:23,104 --> 00:02:25,920
所以单独为它起一个美国

45
00:02:27,200 --> 00:02:30,528
其他的这点是在Class的里头

46
00:02:30,784 --> 00:02:32,832
这两个可以合并起来

47
00:02:33,344 --> 00:02:34,880
卸载一个macro

48
00:02:38,208 --> 00:02:43,072
最设计好这个macro之后这个里头的细节就让各位请阁下来

49
00:02:43,840 --> 00:02:44,608
慢慢的

50
00:02:45,120 --> 00:02:46,144
请为了

51
00:02:48,192 --> 00:02:50,240
设置好这个门口之后

52
00:02:52,544 --> 00:02:56,128
将来的任何的应用端的class

53
00:02:57,152 --> 00:02:58,944
我们写应用程序的人

54
00:02:59,200 --> 00:03:01,504
要发展出我们自己的class

55
00:03:02,016 --> 00:03:05,344
我们只要在哪里投

56
00:03:06,880 --> 00:03:12,000
写这个macro Class的外头也许也用这个Michael

57
00:03:12,768 --> 00:03:14,048
你看这个里头

58
00:03:14,304 --> 00:03:16,096
用一个y轴用一个

59
00:03:17,120 --> 00:03:18,400
只要选质量好

60
00:03:19,680 --> 00:03:21,216
就相当于写出了

61
00:03:22,240 --> 00:03:23,008
左上角

62
00:03:23,776 --> 00:03:25,056
浅黄色的这一段

63
00:03:25,312 --> 00:03:29,920
这两行micro就相当于写出了这一堆

64
00:03:30,176 --> 00:03:31,712
有颜色的这一堆

65
00:03:33,248 --> 00:03:38,112
刚刚有潜逃过只有外头的这一个是汉类的名称相关

66
00:03:39,392 --> 00:03:42,720
所以外头的这一个要加上类的名称

67
00:03:44,000 --> 00:03:46,560
这样展开来才会对的东西

68
00:03:48,864 --> 00:03:50,400
这个名称压负荷

69
00:03:53,984 --> 00:03:55,264
这个就是

70
00:03:55,776 --> 00:03:57,568
我所谓的版本是

71
00:03:58,336 --> 00:04:00,128
一个很小的改善

72
00:04:00,384 --> 00:04:06,528
这个改善了就是技术上没有什么改善空间这个改善只是让使用者

73
00:04:06,784 --> 00:04:08,576
能够挣脱懒一点

74
00:04:09,088 --> 00:04:11,136
只要写出这两个那个就好了

75
00:04:12,928 --> 00:04:14,720
有人这么极端吗

76
00:04:15,488 --> 00:04:17,024
真的发展虽然吗

77
00:04:17,791 --> 00:04:18,559
有

78
00:04:18,815 --> 00:04:20,095
而且很有名

79
00:04:20,351 --> 00:04:21,631
Msc

80
00:04:22,399 --> 00:04:25,727
Microsoft session classes这个

81
00:04:25,983 --> 00:04:30,591
这段时间是叱咤风云的这个全球都在用了一套Library

82
00:04:31,615 --> 00:04:33,407
哈里头就有这个东西

83
00:04:36,735 --> 00:04:40,063
那整个mfc的13运用macos

84
00:04:40,319 --> 00:04:40,831
红了

85
00:04:41,343 --> 00:04:42,623
没有了非常的

86
00:04:42,879 --> 00:04:43,903
极致

87
00:04:45,439 --> 00:04:45,951
当然

88
00:04:46,207 --> 00:04:52,351
Mfc有这个东西知道的人可能不多知道一些mfc里面的

89
00:04:52,607 --> 00:04:57,983
红的那部分的人知道的是另外另外的机组非常有名的

90
00:04:58,495 --> 00:05:00,287
这个不是那么有名

91
00:05:02,079 --> 00:05:04,127
好这就是我们的第4版本

92
00:05:06,943 --> 00:05:08,991
这个是测试结果

93
00:05:09,503 --> 00:05:14,623
我既然把他们三又敢改成了版本是我也要测试一下

94
00:05:14,879 --> 00:05:16,671
各位手上的代码

95
00:05:17,183 --> 00:05:18,463
都有这些东西

96
00:05:18,719 --> 00:05:20,511
测试结果在右手边

97
00:05:21,791 --> 00:05:26,399
这是换汤不换药了这个发行版本30完全相同的

98
00:05:26,655 --> 00:05:27,935
在执行出来的

99
00:05:28,191 --> 00:05:31,007
这个我要探讨的部分也是完全一样

100
00:05:31,519 --> 00:05:32,543
五个五个

101
00:05:32,799 --> 00:05:34,079
作为区隔

102
00:05:34,591 --> 00:05:35,615
这就不在

103
00:05:36,127 --> 00:05:37,407
看到他了

104
00:05:38,431 --> 00:05:39,711
前面我们都看过了

105
00:05:42,783 --> 00:05:48,927
所以版本1234版本一是最一般的版本那家

106
00:05:49,183 --> 00:05:52,767
加上了引bedded winter wonderland

107
00:05:53,279 --> 00:05:54,047
把

108
00:05:54,815 --> 00:06:00,959
内存的动作抽取到单一的classloader里面来版本

109
00:06:01,215 --> 00:06:01,727
是呢

110
00:06:02,239 --> 00:06:06,079
在更懒惰一点设计一个micro红出来

111
00:06:06,847 --> 00:06:10,175
这里的1234间进行盗版本3

112
00:06:10,431 --> 00:06:11,711
技术上已经

113
00:06:12,735 --> 00:06:13,503
王贝尔

114
00:06:15,807 --> 00:06:18,879
标准库的allocator长这个样子

115
00:06:19,903 --> 00:06:22,719
他就是刚刚我们所讲的版本3

116
00:06:23,487 --> 00:06:26,815
只不过版本山里头有一根链表

117
00:06:27,071 --> 00:06:29,119
而标准库的二楼Twitter

118
00:06:30,655 --> 00:06:33,983
有时会有很多的很多个OK的

119
00:06:34,239 --> 00:06:35,007
其中有一个

120
00:06:35,775 --> 00:06:36,543
很棒的

121
00:06:37,311 --> 00:06:40,639
阿长这样它有16分自由链表

122
00:06:41,407 --> 00:06:43,711
也就是说他可以应付你16

123
00:06:43,967 --> 00:06:45,503
种不一样的大小

124
00:06:47,039 --> 00:06:49,343
所以它一定是一个全局的

125
00:06:49,855 --> 00:06:53,183
它不是针对哪一个Class来服务

126
00:06:53,695 --> 00:06:55,999
我们到了版本山的时候

127
00:06:56,255 --> 00:06:58,815
我们是per class allocate

128
00:06:59,583 --> 00:07:02,399
Google OK了针对一个类

129
00:07:02,655 --> 00:07:03,423
来服务

130
00:07:03,679 --> 00:07:04,703
这个不是

131
00:07:05,471 --> 00:07:07,519
他针对所有的克拉夫来的

132
00:07:08,799 --> 00:07:13,919
这就是我们的第2讲的重头戏标准库的allocate

133
00:07:14,175 --> 00:07:16,223
我们现在已经掌握了

134
00:07:16,479 --> 00:07:19,295
原来技术的演进是这样的进化

135
00:07:23,135 --> 00:07:24,927
Pathology

136
00:07:25,183 --> 00:07:31,327
第一家马上就要结束了在进入第2讲之前我们还有一些cplusplus基本

137
00:07:31,583 --> 00:07:32,351
构建

138
00:07:32,607 --> 00:07:33,887
小东西

139
00:07:34,143 --> 00:07:35,935
这个地方我们要补起来
